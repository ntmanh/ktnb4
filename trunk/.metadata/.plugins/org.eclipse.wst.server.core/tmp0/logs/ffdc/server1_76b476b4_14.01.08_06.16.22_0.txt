------Start of DE processing------ = [1/8/14 6:16:22:147 GMT] , key = javax.transaction.TransactionRolledbackException com.ibm.ws.Transaction.TranManagerImpl.completeTxTimeout 527
Exception = javax.transaction.TransactionRolledbackException
Source = com.ibm.ws.Transaction.TranManagerImpl.completeTxTimeout
probeid = 527
Stack Dump = javax.transaction.TransactionRolledbackException: Transaction is ended due to timeout
	at com.ibm.ws.Transaction.JTA.TranManagerImpl.completeTxTimeout(TranManagerImpl.java:589)
	at com.ibm.ws.Transaction.JTA.TranManagerSet.completeTxTimeout(TranManagerSet.java:641)
	at com.ibm.ws.webcontainer.webapp.WebAppTransactionCollaborator.preInvoke(WebAppTransactionCollaborator.java:115)
	at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:662)
	at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:203)
	at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1069)
	at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:455)
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:279)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
	at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at com.ibm.ws.webcontainer.servlet.StrictServletInstance.doService(StrictServletInstance.java:110)
	at com.ibm.ws.webcontainer.servlet.StrictLifecycleServlet._service(StrictLifecycleServlet.java:174)
	at com.ibm.ws.webcontainer.servlet.ServicingServletState.service(StrictLifecycleServlet.java:333)
	at com.ibm.ws.webcontainer.servlet.StrictLifecycleServlet.service(StrictLifecycleServlet.java:116)
	at com.ibm.ws.webcontainer.servlet.ServletInstance.service(ServletInstance.java:283)
	at com.ibm.ws.webcontainer.servlet.ValidServletReferenceState.dispatch(ValidServletReferenceState.java:42)
	at com.ibm.ws.webcontainer.servlet.ServletInstanceReference.dispatch(ServletInstanceReference.java:40)
	at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:76)
	at cmc.com.ktnb.util.AuthenticationFilter.doFilter(AuthenticationFilter.java:99)
	at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:132)
	at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:71)
	at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.handleWebAppDispatch(WebAppRequestDispatcher.java:1162)
	at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:676)
	at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:203)
	at com.ibm.ws.webcontainer.srt.WebAppInvoker.doForward(WebAppInvoker.java:125)
	at com.ibm.ws.webcontainer.srt.WebAppInvoker.handleInvocationHook(WebAppInvoker.java:300)
	at com.ibm.ws.webcontainer.cache.invocation.CachedInvocation.handleInvocation(CachedInvocation.java:71)
	at com.ibm.ws.webcontainer.cache.invocation.CacheableInvocationContext.invoke(CacheableInvocationContext.java:120)
	at com.ibm.ws.webcontainer.srp.ServletRequestProcessor.dispatchByURI(ServletRequestProcessor.java:250)
	at com.ibm.ws.webcontainer.oselistener.OSEListenerDispatcher.service(OSEListener.java:334)
	at com.ibm.ws.webcontainer.http.HttpConnection.handleRequest(HttpConnection.java:56)
	at com.ibm.ws.http.HttpConnection.readAndHandleRequest(HttpConnection.java:652)
	at com.ibm.ws.http.HttpConnection.run(HttpConnection.java:448)
	at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:936)

Dump of callerThis = 
Object type = com.ibm.ws.Transaction.JTA.TranManagerImpl
com.ibm.ws.Transaction.JTA.TranManagerImpl@d2c0d2c

==> Performing default dump from com.ibm.ws.Transaction.JTS.TransactionDiagnosticModule  = Wed Jan 08 06:16:22 GMT 2014
TransactionService :: Dump of callerThis = 
Object type = com.ibm.ws.Transaction.JTA.TranManagerImpl
  txTimeout = 120
  tx = com.ibm.ws.Transaction.JTA.TransactionImpl@75c875c8
  ltc = com.ibm.ws.LocalTransaction.LocalTranCurrentImpl@d320d32
  tc = com.ibm.ejs.ras.TraceComponent@476d476d
  DEFAULT_TX_TIMEOUT = 0
  class$com$ibm$ws$Transaction$JTA$TranManagerImpl = java.lang.Class@4cfa4cfa

+Data for directive [defaultdefault] obtained. = 
TransactionService :: System identity hash code for static tranManagerSet = 1175537169
TransactionService :: Current transaction name = 57415344:000000000000000600000002f5805026b8e2d51339683b2041ea91477c262d2b73657276657231[]
TransactionService :: Current transaction status = marked rollback
TransactionService :: Current transaction status (numeric value) = 1
TransactionService :: Dump of the RegisteredResources object for the current transaction = 
Object type = java.util.ArrayList
  elementData = [Ljava.lang.Object;@3d113d11
  size = 1
  serialVersionUID = 8683452581122892189
  class$java$lang$Object = null
  modCount = 1

TransactionService :: The number of resources enlisted with the current transaction = 1
TransactionService :: Resource 0 - Resource = com.ibm.ws.Transaction.JTA.OnePhaseResourceImpl@76a576a5
TransactionService :: Resource 0 - instanceof = JTAResource
TransactionService :: Resource 0 - JTAResource.xid = {XID: formatId(1df93), gtrid_length(4), bqual_length(0), data(2ae42ae4)}
TransactionService :: Resource 0 - JTAResource.state = 4
TransactionService :: Resource 0 - JTAResource.xaEnded = true
TransactionService :: Resource 0 - Dump of the wrappered resource object for the current transaction = 
Object type = com.ibm.ejs.j2c.LocalTransactionWrapper
  mcWrapper = com.ibm.ejs.j2c.MCWrapper@2a8d2a8d
  localTransaction = 
    _______________________________________________________________________
    
        First Failure Data Capture information for
              com.ibm.ws.rsadapter.spi.WSRdbManagedConnectionImpl@17be17be
    _______________________________________________________________________
    
    ONE PHASE ENABLED

    Database Type:
      null

    Transaction State:
      NO_TRANSACTION_ACTIVE

    Statement Cache Size (maximum):
      10

    Key:
      [B@59695969

    Performance Monitoring Instrumentation:
      null

    Log Writer:
      null

    Default AutoCommit:
      true

    Current AutoCommit:
      false

    Current Isolation:
      READ COMMITTED

    Support isolation level switching: 
      false

    Thread ID:
      null

    Already Processed Interaction Pending Event?
      false

    Underlying Connection Object: oracle.jdbc.driver.LogicalConnection@17ab17ab
      oracle.jdbc.driver.LogicalConnection@17ab17ab

    Underlying PooledConnection Object: oracle.jdbc.pool.OraclePooledConnection@17701770
      oracle.jdbc.pool.OraclePooledConnection@17701770

    SQLJ Default Context: null
      null

    Driver version:
      10.1.0.3.0

    Database version:
      Oracle Database 10g Enterprise Edition Release 10.2.0.1.0 - Production
With the Partitioning, OLAP and Data Mining options

    Connection Event Listeners:

      com.ibm.ejs.j2c.ConnectionEventListener@2ae02ae0
    
    Maximum Handle List Size: 15

    Handle Count: 0

    Handles:

      null
      null
      null
      null
      null
      null
      null
      null
      null
      null
      null
      null
      null
      null
      null
    
    State Manager:
      com.ibm.ws.rsadapter.spi.WSStateManager@2a892a89

    XA Resource:
      null

    _______________________________________________________________________
    
        First Failure Data Capture information for
              com.ibm.ws.rsadapter.spi.WSRdbSpiLocalTransactionImpl@2b0f2b0f
    _______________________________________________________________________
    
    Connection:
      oracle.jdbc.driver.LogicalConnection@17ab17ab

    ManagedConnection:
      com.ibm.ws.rsadapter.spi.WSRdbManagedConnectionImpl@17be17be

    Detection of multithreaded access is:
      DISABLED

    ManagedConnectionMetaData:
      null

    Statement Cache:
      
com.ibm.ws.rsadapter.spi.CacheMap@292c292c
Number of entries:   6
Maximum entries:     10
Number of buckets:   13
Maximum bucket size: 5
Number of discards:  0

BUCKET SIZE PREV NEXT
  000  000  013  013
  001  001  012  007
                      3d1f3d1f PSTMT: select * from ( select * from Ttkt_Kh_Cuoc_Ttkt t where 1=1  and LOAI = 0 and Loai_Cuoc_Ttkt_KHN in('KHN','BS','TD') and Ma like '%2014%'and id_Don_Vi_Th = 00000 and id_cuoc_ttkt_cha is null ORDER BY substr(ma,length(ma)-2,3) ) where rownum <= ? 1003 1007 0
  002  000  013  013
  003  000  013  013
  004  000  013  013
  005  000  013  013
  006  000  013  013
  007  001  001  014
                      17ea17ea PSTMT: select this_.ID as ID5_0_, this_.MA_CQT as MA2_5_0_, this_.TEN_CQT as TEN3_5_0_, this_.KE_HOACH_NAM as KE4_5_0_, this_.NOI_KY_TRINH as NOI5_5_0_, this_.NGAY_KY_TRINH as NGAY6_5_0_, this_.NOI_PHE_DUYET as NOI7_5_0_, this_.NGAY_PHE_DUYET as NGAY8_5_0_, this_.Y_KIEN_PHE_DUYET as Y9_5_0_, this_.ID_NGUOI_CAP_NHAT as ID10_5_0_, this_.TEN_NGUOI_CAP_NHAP as TEN11_5_0_, this_.NGAY_CAP_NHAT as NGAY12_5_0_ from KTNB_OWNER.TTKT_KH_DUYET_KE_HOACH this_ where (this_.MA_CQT=? and this_.KE_HOACH_NAM=?) 1003 1007 0
  008  000  013  013
  009  001  013  011
                      2ccd2ccd PSTMT: select ktnbdmcanb0_.MA as MA17_0_, ktnbdmcanb0_.TEN as TEN17_0_, ktnbdmcanb0_.MA_PHONG as MA3_17_0_, ktnbdmcanb0_.NGAY_HLUC_TU as NGAY4_17_0_, ktnbdmcanb0_.NGAY_HLUC_DEN as NGAY5_17_0_ from KTNB_OWNER.KTNB_DM_CAN_BO ktnbdmcanb0_ where ktnbdmcanb0_.MA=? 1003 1007 0
  010  001  011  012
                      13ed13ed PSTMT: select this_.ID as ID0_0_, this_.ID_NOI_DUNG_TTKT as ID2_0_0_, this_.ID_NOI_DUNG_CHI_TIET as ID3_0_0_, this_.TEN_NOI_DUNG_CHI_TIET as TEN4_0_0_ from KTNB_OWNER.TTKT_KH_CHI_TIET_NOI_DUNG_TTKT this_ where this_.ID_NOI_DUNG_TTKT=? 1003 1007 0
  011  001  009  010
                      16131613 PSTMT: select this_.ID as ID2_0_, this_.ID_NOI_DUNG as ID2_2_0_, this_.TEN_NOI_DUNG as TEN3_2_0_, this_.ID_CUOC_TTKT as ID4_2_0_, this_.HINH_THUC as HINH5_2_0_, this_.LOAI as LOAI2_0_, this_.NIEN_DO_TU_NGAY as NIEN7_2_0_, this_.NIEN_DO_DEN_NGAY as NIEN8_2_0_, this_.THOI_GIAN_DU_KIEN as THOI9_2_0_, this_.THOI_GIAN_DU_KIEN_DEN_NGAY as THOI10_2_0_, this_.THOI_GIAN_DU_KIEN_TU_NGAY as THOI11_2_0_ from KTNB_OWNER.TTKT_KH_NOI_DUNG_TTKT this_ where this_.ID_CUOC_TTKT=? 1003 1007 0
  012  001  010  001
                      43ea43ea PSTMT: insert into ktnb_log values(?,sysdate,?,?,?,?,?) 1003 1007 0
  013  LRU       009
  014  MRU  007


    _______________________________________________________________________
    
        First Failure Data Capture information for
              com.ibm.ws.rsadapter.spi.WSConnectionRequestInfoImpl@2
    _______________________________________________________________________
    
    User Name:
      null

    Password:
      null

    Isolation Level:
      READ COMMITTED

    Catalog:
      null

    Is Read Only?
      null

    Type Map:
      null

    Hash Code:
      2

    Support isolation switching on connection:
      false

    Handle type:
      java.sql.Connection

    _______________________________________________________________________
    
        First Failure Data Capture information for
              com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl@1b651b65
    _______________________________________________________________________
    
    Detection of multithreaded access is
      DISABLED

    DataSource properties:
      {statementCacheSize=10, password=******, dataSourceName=, networkProtocol=, oraclelogModuleMask=1, portNumber=1521, preTestSQLString=SELECT 1 FROM DUAL, URL=jdbc:oracle:thin:@localhost:1522:KTNB, dataSourceClass=oracle.jdbc.pool.OracleConnectionPoolDataSource, serverName=, loginTimeout=, connRetriesDuringDBFailover=100, dataStoreHelperClass=com.ibm.websphere.rsadapter.OracleDataStoreHelper, enableMultithreadedAccessDetection=false, driverType=, dbFailOverEnabled=false, description=, TNSEntryName=, connRetryIntervalDuringDBFailover=3000, oraclelogPrintMask=62, oraclelogCategoryMask=47, databaseName=, user=ktnb_owner}

    Database Type:
      null

    DataStoreHelper:
      com.ibm.websphere.rsadapter.OracleDataStoreHelper@22cc22cc

    Description:
      null

    InternalDataStoreHelper:
      com.ibm.ws.rsadapter.spi.InternalOracleDataStoreHelper@2c532c53

    Login Timeout:
      0

    Log Writer:
      null

    Performance Monitoring Instrumentation:
      null

    Statement Cache Size (maximum):
      10

    Transaction Resource Registration:
      dynamic

    Transaction Branches are set to be Loosely Coupled: 
      false

    Backend id checking is: 
      true

    dbFailOverEnabled: 
      false

    connectionRetriesDuringDBFailover: 
      100

    connRetryDurationDuringDBFailover: 
      3000

    Connection Factory Type:
      com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource

    Implicit Handle Reactivation is
      ENABLED

    Listing CCI ConnectionFactories:

    
    Listing JDBC ConnectionFactories (DataSources):

      com.ibm.ejs.j2c.ConnectionManager@72117211 --> com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource@4d714d71
    
    _______________________________________________________________________
    
        First Failure Data Capture information for
              com.ibm.ws.rsadapter.spi.WSRdbDataSource@5d2a5d2a
    _______________________________________________________________________
    
    DataSource Implementation Class Name:
      oracle.jdbc.pool.OracleConnectionPoolDataSource

    DataSource Name:
      null

    DataStoreHelper:
      com.ibm.websphere.rsadapter.OracleDataStoreHelper@22cc22cc

    DataSource properties:
      {statementCacheSize=10, password=******, dataSourceName=, networkProtocol=, oraclelogModuleMask=1, portNumber=1521, preTestSQLString=SELECT 1 FROM DUAL, URL=jdbc:oracle:thin:@localhost:1522:KTNB, dataSourceClass=oracle.jdbc.pool.OracleConnectionPoolDataSource, serverName=, loginTimeout=, connRetriesDuringDBFailover=100, dataStoreHelperClass=com.ibm.websphere.rsadapter.OracleDataStoreHelper, enableMultithreadedAccessDetection=false, driverType=, dbFailOverEnabled=false, description=, TNSEntryName=, connRetryIntervalDuringDBFailover=3000, oraclelogPrintMask=62, oraclelogCategoryMask=47, databaseName=, user=ktnb_owner}

    ONE PHASE ENABLED

    Underlying DataSource Object: oracle.jdbc.pool.OracleConnectionPoolDataSource@5300530
      oracle.jdbc.pool.OracleConnectionPoolDataSource@5300530

  enlisted = true
  registeredForSync = true
  _hexString = 2ae42ae4
  tc = com.ibm.ejs.ras.TraceComponent@ed90ed9
  class$com$ibm$ejs$j2c$LocalTransactionWrapper = java.lang.Class@760f760f

TransactionService :: Resource 0 - instanceof = OnePhaseResourceImpl
+Data for directive [defaultcurrenttransaction] obtained. = 
==> Dump complete for com.ibm.ws.Transaction.JTS.TransactionDiagnosticModule  = Wed Jan 08 06:16:22 GMT 2014

<HTML>
<HEAD>
<TITLE>Instructions for customizing WebSphere Application Server for z/OS for a Managed node.                             
</TITLE>  
</HEAD>
<BODY>
<!--                                                                  -->           
<!-- ================================================================ -->         
<!-- PROPRIETARY-STATEMENT:                                           -->         
<!-- Licensed Material - Property of IBM                              -->         
<!--                                                                  -->         
<!-- 5724-I63, 5724-H88, 5655-N01, 5733-W61                           -->         
<!-- (C) Copyright IBM Corp. 1999, 2006                               -->         
<!-- All Rights Reserved                                              -->         
<!-- US Government Users Restricted Rights - Use, duplication or      -->         
<!-- disclosure restricted by GSA ADP Schedule Contract with IBM Corp.-->         
<!-- ================================================================ -->         
<!--                                                                  -->         
<!-- Change Activity:                                                 -->         
<!--                                                                  -->         
<!--   378205  V6.1    083006    FH: Initial version                  --> 
<!--                   092606    FH                                   -->          
<!--   400022  V6.1    102306    FH: NOAUTOMOVE and 64-bit updates    -->
<!--   402402  V6.1    110106   DMB: Reword NOAUTOMOVE TEXT           -->
<!--   412596  V6.1    010306    DB: Add SBBGLOAD references          -->                   
<!--   417077  V6.1    012607    JG: Provide same look/feel           -->
<!--   419506  V6.1    020507  PDOP: Stacked augment-create support   -->
<!--   421106   V6.1   021807     DB: Remove SGSKLOAD                 -->
<!--   425357  V6.1    040907     DB: use aggrgrow option for ZFS     -->         
<!--  467454.1 V6.1    050108  PDOP: Updated retrieveSigners.sh sample-->
<!-- ================================================================ -->         
<h2>
Instructions for customizing WebSphere Application Server for z/OS for a Managed node.
</h2>
<!-- if (${zAugmentingProductData}!=none) --> 
<p><b>
The managed node will be configured with:
</b></p>
<b>           
${zAugmentingProductData}
</b>
<!-- endif -->
<p>                                                                               
The Profile Management Tool has created jobs based on the information you          
provided. These instructions tell you how to modify the operating               
system and run the jobs to customize WebSphere Application Server for z/OS.  
When you upload the customization jobs to the target system, a text version of
these instructions will be written to:
<samp><xmp> 
    ${zTargetHLQ}.CNTL(BBOMNINS)
</xmp></samp>                      
</p>                                                                                
<h3>Guidelines</h3>
<UL>
<li>
Upload the customization jobs to the following data sets on the target
system:
<samp><xmp>
    ${zTargetHLQ}.CNTL
    ${zTargetHLQ}.DATA
</xmp></samp> 
</li>
<li>You need to use these instructions on your target system.
</li>
</UL>
<HR ALIGN=center NOSHADE SIZE=5 WIDTH=90%>
<h4>Manual configuration updates</h4>
<p>
The Profile Management Tool does not attempt to
update configuration data for your base operating system or existing
subsystems. You need to perform the following manual steps prior to running
the WebSphere for z/OS configuration jobs.
</p>
<br><br>
<ol>    
<li>                                                                               
<b>Update BLSCUSER.</b> To use the IPCS support provided by the product, 
append the contents of the
<a href="./cntl/bboipcsp" type="text/plain">cntl/bboipcsp</a> 
file within this customization definition to the BLSCUSER member in your 
IPCSPARM or system PARMLIB dataset.
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>

<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>                                                                         
<BR>                                                                               
</li> 
<li>    
<b>Update SCHEDxx.</b><br> Refer to the                                                                             
<a href="./cntl/bbosched" type="text/plain">cntl/bbosched</a> 
file within this customization definition. 
<BR>    
<br>                                                                               
    In order to set the correct program properties for the WebSphere                
    for z/OS run-time executables, append the contents of this member               
    to the SCHEDxx member in your system PARMLIB concatenation.                     
<BR><br>                                                                               
   <b> Note:  </b> When you are finished, issue the command SET SCH=xx                  
    to activate SCHEDxx and load a new program properties table.                    
                                                                                    
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>                                                                               
<BR>                                                                               
</li>  
<li>
<b>Check that the following data sets are APF-authorized:</b>
<samp><xmp> 
    ${zBbolpaName}
    ${zBboloadName}
    ${zBbgloadName}
    ${zBbolod2Name}
</xmp>
<!-- if (${zSameDataSetNames}==false) -->  
<xmp>
    ${zAppServerBbolpaName}
    ${zAppServerBboloadName}
    ${zAppServerBbgloadName}
    ${zAppServerBbolod2Name}
</xmp>           
<!-- endif -->
</samp>                                                                                    
<p> 
    Add these datasets to your <samp>PROGxx</samp> or <samp>IEAAPFxx</samp> parmlib members, as
    appropriate, ensuring you specify the correct volsers.<br>
    <b>Note:</b> You must add the actual data set names to your parmlib members and not any aliases you may have specified.
</p>
<BR>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table>  
<br><br>                                                                                   
</li>                                                                                    
<li>                                                                               
<b>Update SMFPRMxx.</b> To collect the SMF120 records created by the run-time servers, 
   update SMFPRMxx to include record type 120, as in the following example:
<br>
<br><pre>
       SUBSYS(STC,EXITS(IEFU29,IEFACTRT),INTERVAL(SMF,SYNC),TYPE(0,30,70:79,88,89,<strong><em>120</em></strong>,245))
</pre>                                                
<BR>     
<br>                                                                              
    For details on the SMF records, see related topics in the                       
<samp><a href="http://www14.software.ibm.com/webapp/wsbroker/redirect?version=pix&product=was-nd-zos&topic=rprf_tunezopsys" target="_blank">WebSphere for z/OS Information Center</a>.    
</samp>
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table>
<br><br>
</li>
<li> 
<b>Update your active BPXPRMxx member to have the following WebSphere Application Server
    for z/OS configuration file system:</b>
<br>
<samp><xmp> 
    ${zConfigHfsName}
</xmp></samp>
    mounted at:
<samp><xmp> 
    ${zConfigMountPoint}
</xmp></samp>
    in read/write mode.
<br><br>
<b>Example:</b>
<br>
<!-- if (${zFilesystemType}==ZFS) -->
<samp><xmp>
    MOUNT FILESYSTEM('${zConfigHfsName}') MOUNTPOINT('${zConfigMountPoint}') TYPE(${zFilesystemType}) MODE(RDWR) PARM('AGGRGROW')
</xmp></samp>
<!-- endif -->
<!-- if (${zFilesystemType}==HFS) -->
<samp><xmp>
    MOUNT FILESYSTEM('${zConfigHfsName}') MOUNTPOINT('${zConfigMountPoint}') TYPE(${zFilesystemType}) MODE(RDWR)
</xmp></samp>
<!-- endif -->
If you are configuring in a sysplex environment, you may wish to use the NOAUTOMOVE parameter as follows:
<br>
<!-- if (${zFilesystemType}==ZFS) -->
<samp><xmp>
    MOUNT FILESYSTEM('${zConfigHfsName}') MOUNTPOINT('${zConfigMountPoint}') TYPE(${zFilesystemType}) MODE(RDWR) PARM('AGGRGROW') SYSNAME(${zSystemName}) NOAUTOMOVE
</xmp></samp>
<!-- endif -->
<!-- if (${zFilesystemType}==HFS) -->
<samp><xmp>
    MOUNT FILESYSTEM('${zConfigHfsName}') MOUNTPOINT('${zConfigMountPoint}') TYPE(${zFilesystemType}) MODE(RDWR) SYSNAME(${zSystemName}) NOAUTOMOVE
</xmp></samp>
<!-- endif -->
<b>Note:</b> The NOAUTOMOVE parameter prevents the configuration file system from being mounted on a different z/OS 
system in a shared file system configuration, which could cause performance problems.
<!-- if (${zFilesystemType}==ZFS) -->
<br><br>
If you have specified <i>aggrgrow=on</i> in your IOEFSPRM parmlib member, you can omit the AGGRGROW parm shown in the above examples
<!-- endif -->
<br><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<li>
<b>Update TCP/IP by reserving the following ports for WebSphere Application Server for z/OS.</b><br>
These will be used during the federation process of your managed node.
<BR>
<br>
<table border=2 cellspacing=0 cellpadding=3>
<tr>
<th>Type</th>
<th>Number</th>
</tr>
<tr>
<td>SOAP JMX Connector port</td>
<td align=right><tt>${zFederateJmxSoapConnectorPort}</tt></td>
</tr>
<tr>
<td>Node Discovery port</td>
<td align=right><tt>${zFederateNodeDiscoveryPort}</tt></td>
</tr>
<tr>
<td>Node Multicast Discovery Port</td>
<td align=right><tt>${zFederateNodeMulticastDiscoveryPort}</tt></td>
</tr>
<tr>
<td>Node IPv6 multicast discovery port</td>
<td align=right><tt>${zFederateNodeIPv6MulticastDiscoveryPort}</tt></td>
</tr>
<tr>
<td>Node Agent's ORB port</td>
<td align=right><tt>${zFederateOrbPortName}</tt></td>
</tr>
<tr>
<td>High Availability Manager Communication port</td>
<td align=right><tt>${zFederateHamCommPort}</tt></td>
</tr>
<!-- if (${zFederateOrbSslPortName}!=0) -->                                                           
<tr>
<td>Node Agent's ORB SSL port</td>
<td align=right><tt>${zFederateOrbSslPortName}</tt></td>
</tr>
<!-- endif -->
</table>
<BR>
<p>
Add the contents of the
<a href="./cntl/bbotcpim" type="text/plain">cntl/bbotcpim</a> 
file within this customization definition to the PORT section of the file             
referenced by the DD statement for the TCP/IP profile in the                
TCP/IP start procedure. Copy and paste from this file into the             
data set used by your installation.   
</p>       
<p>                               
<b>Attention:</b> If another application has already reserved any of these
   ports for its own use, you must resolve the resulting conflict
   before you continue. If you use the Profile Management Tool to update the
   port specifications, be sure to upload the updated customization jobs.
</p> 
<BR>
<b>Note:</b> The addNode process introduces a special utility server to
      the node.  This utility server is called a nodeagent and
      exists to support administrative functions on the node. By
      default the nodeagent takes over ORB port 2809.  
<br><br> 
<b>Note:</b> On WebSphere z/OS the ORB port doubles as the INS CosNaming
      bootstrap port.  By default, this port (2809) was assigned
      to the Application Server.  Normally you want the nodeagent
      to be the INS CosNaming bootstrap point for the entire node,
      so that RMI/IIOP clients that do not override the INS
      CosNaming bootstrap defaults can locate within the namespace,
      EJBs installed on any server on that node.  In order for the
      nodeagent to take over port 2809, the Application Server must
      be assigned a new ORB port.  The default new ORB port for the
      Application Server is 9810.  The nodeagent will take over a
      Application Server's ORB port only if the nodeagent's ORB
      port is equal to an Application Server's ORB port.  You can
      specify the nodeagent's ORB port in the 'ORB port' field.
      You can specify the new ORB port for the Application Server in
      the 'Appplication Server's ORB Port' field.
<BR><br>
 <b>Attention:</b> Skip this step if the ports are already defined in the
    TCP/IP profile.
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<!-- if (${zRunWasFromSteplib}==false) -->                                                           
<li><b>The WebSphere product libraries will be placed in the system link
    pack area (LPA) and system link list.</b>
<p> 
    Check that no other copies of WebSphere Application server, from any
    release, reside in the link pack area or the system link list.  Also, 
    check that the target MVS system has at least 40MB of free storage in the
    extended CSA if SBBOLOAD is placed in the link pack area, or 8MB
    of free storage in extended CSA for the daemon and for each node
    (deployment manager node or application server node), if SBBOLOAD
    is placed in the link list.
</p> 
<br> 
<b>SBBOLOAD</b><br>
<br>You can either load the SBBOLOAD modules into the dynamic link pack
    area, which we recommend, or place SBBLOAD in the system link list.
<ul> 
<li><b>To load the SBBOLOAD modules into the dynamic link pack area,
       enter the following MVS console command:</b>
<samp><xmp> 
    SETPROG LPA,ADD,MASK=*,DSNAME=${zBboloadName}
</xmp></samp>
<p> 
Alternatively, you can place the following statement in a parmlib
PROGxx member which is activated with the SET PROG=xx 
command after system IPL is complete:
</p>
<samp><xmp> 
    LPA ADD MASK(*) DSNAME(${zBboloadName})
</xmp></samp>
<p> 
    Check that sure that the SBBOLOAD modules are loaded into LPA after each
    system IPL.
</p>
</li>
<li><b>To put the SBBOLOAD data set into the system link list.</b>
<br>Determine whether your system uses static (LNKLSTxx) or dynamic
(PROGxx) link list definition, and add the following data set name to the
appropriate LNKLSTxx or PROGxx member. (An IPL will normally be required.)
<br><br>
<samp><xmp>        
    ${zBboloadName}
</xmp></samp>
</li>
</ul>
<BR>
<br><br>
<b>SBBGLOAD</b>
<br><br>
If your servers will be running in 64-bit mode, the SBBGLOAD data
set must be added to the system link list or link pack area      
following the same procedure as for the SBBOLOAD data set.     
<br><br> 
<b>SBBOLD2</b>
<br><br> 
    Place the SBBOLD2 data set into the system link list.  This data
    set must NOT be placed in the system link pack area;  separate
    copies of the SBBOLD2 modules need to be loaded into each WebSphere
    Application Server address space.
<br>
<ul>
<li><b>To put the SBBOLD2 data set into the system link list</b>
<br>Determine whether your system uses static (LNKLSTxx) or dynamic (PROGxx)
link list definition, and add the following data set name to the 
appropriate <samp>LNKLSTxx</samp> or <samp>PROGxx</samp> member.  (An IPL will normally be required.)
<br><br>
<samp><xmp> 
    ${zBbolod2Name}
</xmp></samp>
</li>
</ul>
<BR>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
<!-- endif -->
<!-- if (${zRunWasFromSteplib}==true) -->                                                           
<li><b>The WebSphere product libraries are placed in STEPLIB as
    needed, rather than in the system link pack area and system link
    list.</b><br>Make sure that the target MVS system has at least 8MB
    of free storage in extended CSA for the daemon and for EACH
    node (deployment manager node or application server node).
<br><br> 
<b>SBBOLOAD, SBBGLOAD and SBBOLD2</b>
<br><br> 
<!-- if (${zSameDataSetNames}==true) -->  
    The following data sets will be placed in the STEPLIB concatenation
    for the location service daemon, controller and servant regions,
    and in the <samp>setupCmdLine.sh</samp> script in the WebSphere Configuration
    file system. You must not remove these STEPLIB statements.
<br>
<samp><xmp> 
    ${zBboloadName}
    ${zBbgloadName}
    ${zBbolod2Name}
</xmp></samp>
<BR> 
<!-- endif -->
<!-- if (${zSameDataSetNames}==false) --> 
    The following data sets will be placed in the STEPLIB concatenation             
    for the location service daemon, deployment manager controller and servant 
    regions, and in the setupCmdLine.sh script in the WebSphere Configuration                
    file system for the deployment manager. You must not remove these STEPLIB 
    statements.                       
<BR>
<pre>                                                                               
    ${zBboloadName}
    ${zBbgloadName}                                                                       
    ${zBbolod2Name}
</pre>                                                                       
    The following data sets will be placed in the STEPLIB concatenation             
    for the application server controller, controller adjunct and servant 
    regions, and in the setupCmdLine.sh script in the WebSphere Configuration                
    file system for the application server. You must not remove these STEPLIB 
    statements.                       
<BR>
<pre>                                                                               
    ${zAppServerBboloadName}
    ${zAppServerBbgloadName}                                                                       
    ${zAppServerBbolod2Name}
</pre>                                                                       
<!-- endif -->
<!-- endif -->
<!-- if (${zRunWasFromSteplib}==true) --> 
<p><b>BBORTS61</b>
</p>
<p> 
    The BBORTS61 module is used by WebSphere Application Server for
    component trace support. A copy of this module (any maintenance
    level) must be in the system link pack area in order for CTRACE
    to work correctly.
</p>
<p> 
    If a copy of BBORTS61 is currently loaded into LPA, no further action is required.
</p><p> 
    Otherwise, issue the following MVS console command to load BBORTS61 into dynamic LPA:
</p>
<samp><xmp> 
    SETPROG LPA,ADD,MODNAME=BBORTS61,DSNAME=${zBbolpaName}
</xmp></samp>
<p> 
    Alternatively, you can place the following statement in a parmlib
    PROGxx member, which is activated with the SET PROG=xx command after
    system IPL is complete:
</p>
<samp><xmp> 
    LPA ADD MODNAME(BBORTS61) DSNAME(${zBbolpaName})
</xmp></samp> 
<p>
    Check that the BBORTS61 module is loaded into LPA after each system IPL.
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li> 
<!-- endif -->
<li>
<b>WebSphere Application Server for z/OS customization assumes that the following system data sets are in the system link list:</b>
<samp><xmp> 
       Language Environment     SCEERUN
                                SCEERUN2
 
       System SSL               SIEALNKE (z/OS 1.6 and above)
</xmp></samp>
<p> 
    See the Language Environment Customization manual and the System
    SSL Programming manual for your z/OS release for advice on placing
    members from the libraries into the system link pack area.
</p>
<p> 
    Placing these data sets in the link list insulates your WebSphere Application Server
    for z/OS configuration from changes in data set names (for example,
    when migrating to z/OS 1.6).
</p>
<p> 
    If the Language Environment or System SSL load module libraries are
    not in your system link list, you need to perform the following steps
    before starting any WebSphere Application Server for z/OS servers:
</p> 
<ul>
<li>Check that the data sets are APF-authorized
</li>
<li>Complete the optional step below to add the data sets to STEPLIB in the server JCL and <samp>setupCmdLine.sh</samp> script(s).
</li>
</ul>
<br> 
    If you regenerate server cataloged procedures at any point, make
    sure the data sets are added to the new cataloged procedures.
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li> 
<li>
<b>If the error logstream</b> <samp>${zErrorLogstreamName}</samp> <b>does not already exist on your target system, 
make a copy of the appropriate job in the SBBOJCL data set, customize it according to the comments in the job, and run:</b>
<samp><xmp> 
    BBOERRLC    Create an error logstream in a coupling facility
    BBOERRLD    Create a DASD-only error logstream
</xmp></samp> 
<BR>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<li>
<b>WebSphere Application Server for z/OS regions open a large number of files</b> (more than 1024). Make sure your BPXPRMxx 
parmlib member(s) specify a value of MAXFILEPROC that is greater than or equal to 2000. Use the following MVS console command to see 
your current MAXFILEPROC setting:
<samp><xmp> 
    D OMVS,OPTIONS
</xmp></samp>
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
</ol>
<br><br>
<HR ALIGN=center NOSHADE SIZE=5 WIDTH=90%>
<br><br>
<h3> 
Running the customized jobs
</h3>
<br>
<p> 
The Profile Management Tool built a number of batch jobs with the
variables you supplied. You need to run the jobs in the order listed
below, using user IDs with the appropriate authority.
</p> <br>
<b>Note:</b> Whenever "file system update authority" is indicated, the user
      ID used to run the configuration job must have
      EITHER <samp>uid = 0</samp>
          OR the following UNIXPRIV class profile privileges:
<samp><xmp>        
    CONTROL access to SUPERUSER.FILESYS
    UPDATE  access to SUPERUSER.FILESYS.MOUNT
    READ    access to SUPERUSER.FILESYS.CHOWN
    READ    access to SUPERUSER.FILESYS.CHANGEPERMS
    READ    access to SUPERUSER.FILESYS.PFSCTL
</xmp></samp>
<p> 
      If the <samp>UNIXPRIV profile CHOWN.UNRESTRICTED</samp> is defined, then
      the <samp>SUPERUSER.FILESYS.CHOWN</samp> is not required.  For information
      about the UNIXPRIV class, see the z/OS Unix System Services
      Planning book.
</p> 
<b>Before you begin: </B> Complete the section above entitled "Manual configuration updates".
<BR><br> 
Follow the steps below, which lists in order the jobs you must submit               
and the commands you must enter. Special handling notes are included                
in the steps. All jobs are members of:
<BR> 
<samp><xmp>
    ${zTargetHLQ}.CNTL
</xmp></samp>
<BR><br> 
<B>Attention: </B> After submitting each job, carefully check the output.
Errors may exist even when all return codes are zero.
<br><br>
In order for RACF to automatically select an unused UID or GID value for WebSphere Application Server user IDs
and groups:
<br><br>
- The RACF profile SHARED.IDS must be defined.<br>
- The RACF profile BPX.NEXT.USER must be define and use to indicate the ranges from which UID and GID values are to be selected.
<br><br>
See the article "Preparing the Security Server (RACF)" in the WebSphere Application Server for z/OS InfoCenter.
For more information, consult Chapter 20, "RACF and z/OS Unix", in the z/OS Security Server RACF Security Administrator's Guide (SA22-7683).   
<br><br>
<BR><br>
<HR ALIGN=center NOSHADE SIZE=5 WIDTH=90%>
<br><br>
<ol>
<li>
<b>Run the BBOMSGC job </b>
<ul>
<li><b>User ID requirement:</b> Update authority for data set       
SYS1.MSGENU and/or SYS1.MSGJPN.                          
 <br><br>

         <b>Attention:</b> This is optional unless you require message   
            translation.                                             
<br><br>

            This job sets up MMS to translate messages for WebSphere 
            for z/OS.                                                
 <br><br>
                                                                    
            There are two steps to update SYS1.MSGENU and            
            SYS1.MSGJPN. Remove the unneeded step and change the     
           target libraries, if necessary.                          
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
</ul>
</li>
<li>
<b>Check WebSphere Application Server home directories.</b>     
<br><br>
            Verify that the following directories exist on your      
            target z/OS system and that the ownership and permission 
            bits are correct:                                        
<br><br>
<pre> 
    ${zUserIDHomeDirectory} 
                                               
         ownership:       (any)                                         
         permission bits: 755                                     
                                                                    
    ${zUserIDHomeDirectory}/${zConfigurationGroup} 
    
         ownership:       ${zHFSOwnerUserID}:${zConfigurationGroup}                             
         permission bits: 770                                     
         
    ${zUserIDHomeDirectory}/${zServantGroup}
    
         ownership:       ${zHFSOwnerUserID}:${zServantGroup}                                    
         permission bits: 770                                     
                                                                     
    ${zUserIDHomeDirectory}/${zLocalUserGroup} 
    
         ownership:       ${zHFSOwnerUserID}:${zLocalUserGroup}                             
         permission bits: 770
</pre>                                              
<br>                                                                    
            If the these directories do not exist, create them with  
            the above ownership and permission bits.                 
<br><br>
            The security domain configuration job BBOSBRAM can be    
            used to create these directories if necessary.           
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<li>
<b>Run job BBOMBRAJ</b> 
<ul>
<li><b> User ID requirement:</b> Authority to update data set        
<br><br>
<samp><xmp>
    ${zTargetHLQ}.DATA 
</xmp></samp>                                           
<br><br>
This job builds (but does not execute) the RACF commands 
for the WebSphere Application Server for z/OS run-time clusters and places  
them into member BBOMBRAK of data set                    
<br><br>
<samp><xmp>                                                                     
    ${zTargetHLQ}.DATA  
</xmp></samp>                                          
<br><br>
Carefully review these definitions with your security administrator.                                           
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
</ul>
</li>
<li>
<b>Run job BBOMBRAK</b> 
<ul>
<li>
 <b>User ID requirement:</b> RACF special authority.             
<br><br>
       This job executes the RACF commands set up in the previous job.                                            
<br><br>
<b>Result:</b> You may receive errors, such as INVALID USER messages, from this job because a user ID, group  or     
profile is already defined.  Make sure the existing user ID, group or profile has the same characteristics   
as the user ID, group or profile being created by BBOMBRAK.  If not, then change the values in the         
Profile Management Tool, which are causing the conflict.  Then upload the updated customization jobs and restart the process.                                                 
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
</ul>
</li>
<li><b>Check user ID authorizations</b>                            
<br><br>
            Make sure the <samp> ${zConfigurationGroup}</samp> group has read access to all     
            WebSphere product data sets, as well as to any other     
            data sets which will be placed in WebSphere Application Server for z/OS     
            cataloged procedure STEPLIB concatenations.              
 <br><br>
            Check the resolver configuration file in use on your system.   
            Depending on your IP setup, this file may be             
            /etc/resolv.conf, SYS1.TCPPARMS(TCPDATA), or another     
            data set.                                                
<br><br>
<samp><xmp>                                                                     
    ${zControlUserid}                                                 
    ${zServantUserid}
</xmp></samp>                                                 
<br><br>
            See the z/OS eNetwork Communication Server IP            
            Configuration manual for the resolver search order.      
<br><br>
                                                                  
            Ensure the following user ID has read access to the data 
            sets in your system parmlib concatenation:               
<br><br>
<samp><xmp>                                                                   
    ${zDaemonUserid} 
</xmp></samp>                                               
<br><br>
         <b>Attention:</b>                                                           
             If operator commands are protected by the z/OS security 
             server at your installation, you must ensure that       
             sufficient authority is given to WebSphere tasks to     
             control operations.                                     
<br><br>
             The Application Server Controller user ID 
             <samp>(${zControlUserid})</samp>     
             needs the ability to perform operations on started      
             tasks belonging to WebSphere Application Server for     
             z/OS.                                                   
<br><br>
                                                                   
             The asynchronous administrator user ID, and any user    
             ID used to run the federation job when the node agent   
             is started automatically, need the authority to issue   
             the MVS START command.                                  
<br><br>
                                                                 
             If you are currently controlling MVS console command    
             authority with SAF OPERCMDS profiles, grant the         
             following authorities as indicated, substituting your   
             own profile names:                                      
<br><br>
<samp><xmp>                                                               
    PERMIT  START_profile_name  CLASS(OPERCMDS) ID (${zControlUserid}  ${zAdminAsynchTaskUserid})  ACCESS(UPDATE)          
                                                                     
    PERMIT  STOP_profile_name  CLASS(OPERCMDS)  ID (${zControlUserid} )  ACCESS(UPDATE)                   
                                                                     
    PERMIT  MODIFY_profile_name  CLASS(OPERCMDS) ID (${zControlUserid} )  ACCESS(UPDATE)                   
                                                                     
    PERMIT  CANCEL_profile_name  CLASS(OPERCMDS) ID (${zControlUserid} )  ACCESS(UPDATE)                   
                                                                     
    PERMIT  FORCE_profile_name  CLASS(OPERCMDS)  ID (${zControlUserid} )  ACCESS(UPDATE)                   
</xmp></samp>
<br><br>
             You must also grant the appropriate console command     
             authority to any user ID that executes the              
             startServer.sh or stopServer.sh script.                 
<!-- if (${zFilesystemType}==HFS) -->                                                           
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<li>
<b>Run the BBOMCHFS job</b>
<ul>
<li><b>User ID requirement:</b>
     File system update authority (see above), and the    
                authority to allocate
<samp><xmp>                                
    ${zConfigHfsName}                                        
</xmp></samp>
</li>
<li>
This job completes two tasks:                                                
<ul>
<li>Creates a mount point directory                      
<samp><xmp>                                                                     
    ${zConfigMountPoint}                                           
</xmp></samp> 
</li>       
<li>Allocates the configuration file system using the Hierarchical File System (HFS)                   
<samp><xmp>                                                                     
    ${zConfigHfsName}                                           
</xmp></samp>                                                                     
and mounts it at the above mount point.              
</li>
</ul>                                                                     
<b>Do not run this job if:</b>
<ol> 
<li>                                 
              The configuration file system already exists and is 
                 mounted at the desired mountpoint, or if            
</li>
<li>                                                                     
              The mount point directory is controlled by          
                 automount.  Either disable the automount rule for   
                 the configuration mount point while running this    
                 job, or perform the following steps manually:       
<ul>                                                                     
<li>Allocate the configuration file system data set. 
</li>
<li>Issue the following shell commands, which will   
                    also cause automount to mount the file system    
</li>
</ul>
</li>
</ol>
<samp><xmp>                                                                     
    chmod 775 ${zConfigMountPoint}                                
    chown ${zHFSOwnerUserID}:${zConfigurationGroup} ${zConfigMountPoint}                  
                                                                     
</xmp></samp>                                                                     
         <b>   Before you begin:</b> The BBOMCHFS job assumes your root     
            file system is mounted in read/write mode.  If the root  
            file system is not mounted in read/write mode, manually  
            create the directory                                     
<samp><xmp>                                                                     
    ${zConfigMountPoint}                                               
</xmp></samp>                                                                     
            and any needed higher directories, set file permissions  
            to 775, and set the owning user ID and group to ${zHFSOwnerUserID}
            and <samp>${zConfigurationGroup}</samp> before running BBOMCHFS.                   
<br><br>                                                                     
          <b>  Example:</b> If you plan to use /WebSphere/V6R1M0 as your    
            directory, issue the following commands from within the  
            OMVS shell:                                              
<samp><xmp>                                                                     
    mkdir -p -m 775 /WebSphere/V6R1M0                      
    chown -R ${zHFSOwnerUserID}:${zConfigurationGroup} /WebSphere                  
</xmp></samp>
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
</ul>
<!-- endif -->
<!-- if (${zFilesystemType}==ZFS) -->                                                           
</li>
<li>
<b>Run the BBOMCZFS job</b> 
<ul> 
<li>
<b>User ID requirement:</b> 
File system update authority (see above), and the    
authority to allocate                                
<samp><xmp>
    ${zConfigHfsName}                                        
</xmp></samp>
</li>
<li>
This job completes two tasks:                                                
<ul> 
<li>                                                                    
               Creates a mount point directory                      
<samp><xmp>                                                                     
    ${zConfigMountPoint}   
</xmp></samp>                                        
</li>
<li>                                                                     
               Allocates the configuration file system using the    
                z/OS Distributed File Service zSeries File System    
                (zFS)                                                
<samp><xmp>                                                                     
    ${zConfigHfsName}                                           
</xmp></samp>                                                                     
                and mounts it at the above mount point.              
</li> 
</ul>                                                                    
 <b>Do not run this job if:</b>                                  
<ol>
<li>   
           The configuration file system already exists and is 
                 mounted at the desired mountpoint, or if            
</li>    
<li>                                                                 
           The mount point directory is controlled by          
                 automount.  Either disable the automount rule for   
                 the configuration mount point while running this    
                 job, or perform the following steps manually:       
<ul> 
<li>                                                                    
                Allocate the configuration file system data set. 
</li>    
<li>            Issue the following shell commands, which will   
                    also cause automount to mount the file system    
</li>
</ul>
<samp><xmp>                                                                     
    chmod 775 ${zConfigMountPoint}                                
    chown ${zHFSOwnerUserID}:${zConfigurationGroup} ${zConfigMountPoint}                  
</xmp></samp>
</li>                                                                     
</ol>                                                                     
          <b>  Before you begin:</b> The BBOMCZFS job assumes your root     
            file system is mounted in read/write mode.  If the root  
            file system is not mounted in read/write mode, manually  
            create the directory                                     
<samp><xmp>                                                                     
    ${zConfigMountPoint}                                               
</xmp></samp>                                                                     
            and any needed higher directories, set file permissions  
            to 775, and set the owning user ID and group to 
            <samp> ${zHFSOwnerUserID}</samp>
            and <samp>${zConfigurationGroup}</samp> before running BBOMCZFS.                   
<br><br>                                                                     
         <b>   Example:</b> If you plan to use /WebSphere/V6R1 as your      
            directory, issue the following commands from within the  
            OMVS shell:                                              
<samp><xmp>                                                                     
    mkdir -p -m 775 /WebSphere/V6R1                        
    chown -R ${zHFSOwnerUserID}:${zConfigurationGroup} /WebSphere                  
</xmp></samp>
</li>
</ul>
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<!-- endif -->
<li>
<b>Run the BBOMHFSA job </b>  
<ul>
<li><b>User ID requirement:</b>  
   File system update authority (see above).                                                                  |
<br> This job populates the previously-created file system.   
                                                                     
        <b>    Note:</b> If the SCEERUN data set is not in the system link  
            list, add that data set to STEPLIB for the CHECKV step   
            in BBOMHFSA.                                             
<br><br>                                                                     
            After you completed this step, check the job output. Success is      
            indicated with a <samp>RC=0</samp> in the job output.                 
<br>
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
</ul>
</li>
<li>
<b>Run the BBOWCPYM job</b>
<ul>
<li><b>User ID requirement:</b>                                     
     File system update authority (see above), and the    
           authority to update the cataloged procedure library  
            <samp>    ${zProclibName}</samp>                                            
<br><br>
            This job copies the tailored start procedures,           
            parameters, and EXECs to the run-time libraries.         
<br><br>                                                                     
        <b>    Attention:</b> Be aware that you may overlay existing        
            members in the above data sets.                          
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
<br>
</li>                                                                           
</ul>
</li>
<li>
<b>Run the BBOWWPFM job</b> 
<ul>
<br> 
<li><b> User ID requirement:</b>                                     
    File system update authority (see above).            
<br><br> This job sets up the runtime file system.                
<br><br>                                                                     
        <b>    Note:</b> If the SCEERUN2 data set is not in the system link 
            list, add that data set to STEPLIB for the LIBVSCRP step 
            in BBOWWPFM.                                             
<br><br>                                                                     
         After you have completed this step, examine the job output. Success is      
            indicated by <samp> rc=0</samp>.                                       
<br><br>                                                                     
          <b>  Note:</b> If the BBOWWPFM (profile creation) job fails,      
            delete the WAS_HOME/profiles/default directory and all   
            its contents before rerunning BBOWWPFM.                  
<br>
</li>
</ul>
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<li>
<b>Run the BBOMHFSB job</b> 
<ul>
<li><b>  User ID requirement: </b>                                    
    File system update authority (see above).            
<br><br>
      This job will complete the file system initialization.   
<br><br>                                                               
      After you have completed this step, check the job output. Success is      
      indicated with a <samp>RC=0</samp> in the job output.                
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
</ul>
</li>
<li>
<b> All WebSphere Application Server processes require       
 access to the Language Environment and System SSL load   
       modules.</b>                                                 
 <br><br>
                                                                    
            If the SCEERUN, SCEERUN2 and System SSL load module      
            libraries are not in the system link list, add them to   
            the STEPLIB DD concatenation in each of the following    
            cataloged procedures in                                  
         <samp>   ${zProclibName}</samp>:                                               
  <br><br>
  <samp><xmp>                                                                 
      ${zControlProcName}Z                                            
       
      ${zServantProcName}Z                                            

      ${zAdjunctProcName}Z                                            

      ${zDaemonProcName}Z                                           
 </xmp></samp> 
 <br><br>
            and also add the full data set names, separated by       
            colons (:), to the STEPLIB variable in the shell script  
  <br><br>
<samp><xmp>                                                                 
    ${zConfigMountPoint}/${zWasServerDir}/profiles/default/bin/setupCmdLine.sh               
</xmp></samp> 
<br><br>
            When you modify the setupCmdLine.sh script, do not        
            remove lines or comment them out, this may cause      
            problems with automated updates to the script.           
 <br><br>
                                                                    
            Add only those data sets that are not in the link list. 
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<li>
<b>    Make sure Resource Recovery Services (RRS) is active.</b>    
 (See the InfoCenter for setup instructions if necessary.)
      Look for the following console message to verify that    
            RRS was successfully started:                            
<br><br>
<samp><xmp>                                                                 
    ASA2011I RRS INITIALIZATION COMPLETE. COMPONENT ID=SCRRS                                             
</xmp></samp>
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<!-- if (${zFederateDmaSecurity}==true) -->                                                           
<!-- if (${zAdminSecurityType}==websphereFamily) -->                                                           
<li><b>WebSphere-managed security update.</b>
If both your target Network Deployment cell and the cell
containing the node you are federating use WebSphere-managed security, 
and both cells are using file-based 
keystores, run the <samp>retrieveSigners.sh</samp> script 
from the home directory of the node being federated:     
<br><br>
<samp><xmp>
    ${zConfigMountPoint}/${zWasServerDir}/bin/retrieveSigners.sh CellDefaultTrustStore ClientDefaultTrustStore -port ${zFederateDmaPort}    
      -conntype ${zFederateDmaPortType} -user ${zFederateDmaSecurityUserID} -password ${zFederateDmaSecurityPassword} -autoAcceptBootstrapSigner   
</xmp></samp>
<br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<!-- endif -->
<!-- endif -->
<!-- if (${zFederateDmaSecurity}==false) -->                                                           
<li><b>Check administrative security.</b>
You need to verify that your target Network Deployment cell is
running without administrative security.  You should
enable administrative security after you have federated to 
prevent unauthorized access to the Network Deployment 
cell.                                                                     
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<!-- endif -->
<li>
<b>Run the BBOWMNAN job</b>
<ul>
<li>
<b>User ID requirement:</b>                           
<br><br>
<ol> 
<li>File system update authority (see above).
</li> 
<li>If the Network Deployment cell uses a
z/OS LocalOS (SAF) registry, then the user ID used to run
this job must be connected to the Network Deployment
cell's configuration group.
</li>                       
<li>If SSL certificates are stored in SAF keyrings,
then the user ID used to run this job must have a SAF keyring named
<samp><xmp> 
    ${zDefaultSAFKeyringName} 
</xmp></samp>
and this keyring must contain the Network Deployment 
cell's CA certificate.
</li>
</ol>        
<br>
       If you choose the start the node agent automatically,    
            the user ID used to run BBOWMNAN will also need the      
            authority to issue the MVS START command.                
<br><br>
            This job will federate your node into the specified      
            Deployment Manager cell.  Ensure that your Deployment    
            Manager is running before submitting this job            
 <br><br>
            After you complete this step, check the job output. Success is      
         indicated with a <samp> RC=0</samp> in the job output.                 
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
</ul>
</li>
<li>
<b>Update WLM policy.</b> If your system is busy, you may want to include a rule   
 in your WLM policy that OMVS work for job 
 <samp>${zFederateServerShortName}</samp>       
 (such as the postinstaller step) is to run in a service  
  class with a high service objective.                     
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>                                                                
<li>
<b>Start the node agent server</b>                              
<br><br>
 Issue the following MVS command to start your node agent server, replacing &lt;dmgr_cell_short_name&gt; with the cell   
       short name of the target Deployment Manager cell:         
 <br><br>
<samp><xmp>                                                                    
    START ${zControlProcName},JOBNAME=${zFederateServerShortName},ENV=<dmgr_cell_short_name>.${zNodeShortName}.${zFederateServerShortName}   
</xmp></samp>  
<br><br>
<p>If you later convert the node agent to 64-bit
mode, you must add <samp>AMODE=64</samp> to the START command:
<samp><xmp>                                                                    
    START ${zControlProcName},JOBNAME=${zFederateServerShortName},ENV=<dmgr_cell_short_name>.${zNodeShortName}.${zFederateServerShortName},AMODE=64   
</xmp>
</samp>
</p>
  <b>Result:</b> The following message appears on the console and in the job log of <samp>${zFederateServerShortName}</samp>.                            
 <br><br>
<samp><xmp>                                                                    
    BBOO0019I INITIALIZATION COMPLETE FOR WEBSPHERE FOR z/OS CONTROL PROCESS ${zFederateServerShortName}                        
</xmp></samp>
<br><br>
<b>Note:</b> The node agent will already be started if you chose to start the node agent after federation. 
Use this command to start the node agent at other times.
<br><br>
<BR><br>
<table border=1 cellspacing=1 cellpadding=3 width="75%">
<tr>
<TH>Status of task</th>
<th>Date </th>
</tr>
<tr>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;  </td>
</tr>
</table> 
<br><br>
</li>
<li>
<b>The product is now configured.</b>
<br><br>You may create and manage application servers in the node using the administrative console or scripting.
</li>
</ol>
<BR>
</BODY>
</HTML>
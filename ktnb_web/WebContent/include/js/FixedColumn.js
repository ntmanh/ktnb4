var FixedColumns;(function(c,b,a){FixedColumns=function(e,d){if(!this instanceof FixedColumns){alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.");return}if(typeof d=="undefined"){d={}}this.s={dt:e.fnSettings(),iTableColumns:e.fnSettings().aoColumns.length,aiWidths:[],bOldIE:(c.browser.msie&&(c.browser.version=="6.0"||c.browser.version=="7.0"))};this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}};this.s.dt.oFixedColumns=this;this._fnConstruct(d)};FixedColumns.prototype={fnUpdate:function(){this._fnDraw(true)},fnRedrawLayout:function(){this.__fnGridLayout()},fnRecalculateHeight:function(d){d._DTTC_iHeight=null;d.style.height="auto"},fnSetRowHeight:function(g,f){var e=c(g).children(":first");var d=e.outerHeight()-e.height();if(c.browser.mozilla||c.browser.opera){g.style.height=f+"px"}else{c(g).children().height(f-d)}},_fnConstruct:function(k){var h,g,f,j=this;if(typeof this.s.dt.oInstance.fnVersionCheck!="function"||this.s.dt.oInstance.fnVersionCheck("1.8.0")!==true){alert("FixedColumns "+FixedColumns.VERSION+" required DataTables 1.8.0 or later. Please upgrade your DataTables installation");return}if(this.s.dt.oScroll.sX===""){this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");return}this.s=c.extend(true,this.s,FixedColumns.defaults,k);this.dom.grid.dt=c(this.s.dt.nTable).parents("div.dataTables_scroll")[0];this.dom.scroller=c("div.dataTables_scrollBody",this.dom.grid.dt)[0];var d=c(this.dom.grid.dt).width();var l=0;var e=0;c("tbody>tr:eq(0)>td",this.s.dt.nTable).each(function(n){f=c(this).outerWidth();j.s.aiWidths.push(f);if(n<j.s.iLeftColumns){l+=f}if(j.s.iTableColumns-j.s.iRightColumns<=n){e+=f}});if(this.s.iLeftWidth===null){this.s.iLeftWidth=this.s.sLeftWidth=="fixed"?l:(l/d)*100}if(this.s.iRightWidth===null){this.s.iRightWidth=this.s.sRightWidth=="fixed"?e:(e/d)*100}this._fnGridSetup();for(h=0;h<this.s.iLeftColumns;h++){this.s.dt.oInstance.fnSetColumnVis(h,false)}for(h=this.s.iTableColumns-this.s.iRightColumns;h<this.s.iTableColumns;h++){this.s.dt.oInstance.fnSetColumnVis(h,false)}c(this.dom.scroller).scroll(function(){j.dom.grid.left.body.scrollTop=j.dom.scroller.scrollTop;if(j.s.iRightColumns>0){j.dom.grid.right.body.scrollTop=j.dom.scroller.scrollTop}});c(b).resize(function(){j._fnGridLayout.call(j)});var m=true;this.s.dt.aoDrawCallback=[{fn:function(){j._fnDraw.call(j,m);j._fnGridHeight(j);m=false},sName:"FixedColumns"}].concat(this.s.dt.aoDrawCallback);this._fnGridLayout();this._fnGridHeight();this.s.dt.oInstance.fnDraw(false)},_fnGridSetup:function(){var e=this;this.dom.body=this.s.dt.nTable;this.dom.header=this.s.dt.nTHead.parentNode;this.dom.header.parentNode.parentNode.style.position="relative";var d=c('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div></div>')[0];nLeft=d.childNodes[0];nRight=d.childNodes[1];this.dom.grid.wrapper=d;this.dom.grid.left.wrapper=nLeft;this.dom.grid.left.head=nLeft.childNodes[0];this.dom.grid.left.body=nLeft.childNodes[1];if(this.s.iRightColumns>0){this.dom.grid.right.wrapper=nRight;this.dom.grid.right.head=nRight.childNodes[0];this.dom.grid.right.body=nRight.childNodes[1]}if(this.s.dt.nTFoot){this.dom.footer=this.s.dt.nTFoot.parentNode;this.dom.grid.left.foot=nLeft.childNodes[2];if(this.s.iRightColumns>0){this.dom.grid.right.foot=nRight.childNodes[2]}}d.appendChild(nLeft);this.dom.grid.dt.parentNode.insertBefore(d,this.dom.grid.dt);d.appendChild(this.dom.grid.dt);this.dom.grid.dt.style.position="absolute";this.dom.grid.dt.style.top="0px";this.dom.grid.dt.style.left=this.s.iLeftWidth+"px";this.dom.grid.dt.style.width=(c(this.dom.grid.dt).width()-this.s.iLeftWidth-this.s.iRightWidth)+"px"},_fnGridLayout:function(){var f=this.dom.grid;var h=c(f.wrapper).width();var g=0,e=0,d=0;if(this.s.sLeftWidth=="fixed"){g=this.s.iLeftWidth}else{g=(this.s.iLeftWidth/100)*h}if(this.s.sRightWidth=="fixed"){e=this.s.iRightWidth}else{e=(this.s.iRightWidth/100)*h}d=h-g-e;f.left.wrapper.style.width=g+"px";f.dt.style.width=d+"px";f.dt.style.left=g+"px";if(this.s.iRightColumns>0){f.right.wrapper.style.width=e+"px";f.right.wrapper.style.left=(h-e)+"px"}},_fnGridHeight:function(){var d=this.dom.grid;var e=c(this.dom.grid.dt).height();d.wrapper.style.height=e+"px";d.left.body.style.height=c(this.dom.scroller).height()+"px";d.left.wrapper.style.height=e+"px";if(this.s.iRightColumns>0){d.right.wrapper.style.height=e+"px";d.right.body.style.height=c(this.dom.scroller).height()+"px"}},_fnDraw:function(d){this._fnCloneLeft(d);this._fnCloneRight(d);if(this.s.fnDrawCallback!==null){this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right)}c(this).trigger("draw",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(e){if(this.s.iRightColumns<=0){return}var g=this,d,h,f=[];for(d=this.s.iTableColumns-this.s.iRightColumns;d<this.s.iTableColumns;d++){f.push(d)}this._fnClone(this.dom.clone.right,this.dom.grid.right,f,e)},_fnCloneLeft:function(e){if(this.s.iLeftColumns<=0){return}var g=this,d,h,f=[];for(d=0;d<this.s.iLeftColumns;d++){f.push(d)}this._fnClone(this.dom.clone.left,this.dom.grid.left,f,e)},_fnCopyLayout:function(o,q){var n=[];var l=[];var f=[];for(var h=0,e=o.length;h<e;h++){var m=[];m.nTr=c(o[h].nTr).clone(true)[0];for(var g=0,p=this.s.iTableColumns;g<p;g++){if(c.inArray(g,q)===-1){continue}var k=c.inArray(o[h][g].cell,f);if(k===-1){var d=c(o[h][g].cell).clone(true)[0];l.push(d);f.push(o[h][g].cell);m.push({cell:d,unique:o[h][g].unique})}else{m.push({cell:l[k],unique:o[h][g].unique})}}n.push(m)}return n},_fnClone:function(t,s,g,d){var k=this,u,r,q,j,v,p,m;if(d){if(t.header!==null){t.header.parentNode.removeChild(t.header)}t.header=c(this.dom.header).clone(true)[0];t.header.className+=" DTFC_Cloned";t.header.style.width="100%";s.head.appendChild(t.header);var h=this._fnCopyLayout(this.s.dt.aoHeader,g);var n=c(">thead",t.header);n.empty();for(u=0,r=h.length;u<r;u++){n[0].appendChild(h[u].nTr)}this.s.dt.oApi._fnDrawHead(this.s.dt,h,true)}else{for(m=0;m<g.length;m++){c(">thead th:eq("+m+")",t.header)[0].className=this.s.dt.aoColumns[g[m]].nTh.className;c(">thead th:eq("+m+") span.DataTables_sort_icon",t.header).each(function(x){this.className=c("span.DataTables_sort_icon",k.s.dt.aoColumns[g[m]].nTh)[x].className})}}this._fnEqualiseHeights("thead",this.dom.header,t.header);if(this.s.sHeightMatch=="auto"){c(">tbody>tr",k.dom.body).css("height","auto")}if(t.body!==null){t.body.parentNode.removeChild(t.body);t.body=null}t.body=c(this.dom.body).clone(true)[0];t.body.className+=" DTFC_Cloned";t.body.style.paddingBottom=this.s.dt.oScroll.iBarWidth+"px";t.body.style.marginBottom=(this.s.dt.oScroll.iBarWidth*2)+"px";if(t.body.getAttribute("id")!==null){t.body.removeAttribute("id")}c(">thead>tr",t.body).empty();c(">tfoot",t.body).empty();var o=c("tbody",t.body)[0];c(o).empty();if(this.s.dt.aiDisplay.length>0){c(">tbody>tr",k.dom.body).each(function(y){var A=this.cloneNode(false);var x=k.s.dt.oFeatures.bServerSide===false?k.s.dt.aiDisplay[k.s.dt._iDisplayStart+y]:y;for(m=0;m<g.length;m++){v=g[m];if(typeof k.s.dt.aoData[x]._anHidden[v]!="undefined"){p=c(k.s.dt.aoData[x]._anHidden[v]).clone(true)[0];p.style.width=k.s.aiWidths[v]+"px";A.appendChild(p)}}o.appendChild(A)})}else{c(">tbody>tr",k.dom.body).each(function(i){p=this.cloneNode(true);p.className+=" DTFC_NoData";c("td",p).html("");o.appendChild(p)})}t.body.style.width="100%";s.body.appendChild(t.body);this._fnEqualiseHeights("tbody",k.dom.body,t.body);if(this.s.dt.nTFoot!==null){if(d){if(t.footer!==null){t.footer.parentNode.removeChild(t.footer)}t.footer=c(this.dom.footer).clone(true)[0];t.footer.className+=" DTFC_Cloned";t.footer.style.width="100%";s.foot.appendChild(t.footer);var h=this._fnCopyLayout(this.s.dt.aoFooter,g);var e=c(">tfoot",t.footer);e.empty();for(u=0,r=h.length;u<r;u++){e[0].appendChild(h[u].nTr)}this.s.dt.oApi._fnDrawHead(this.s.dt,h,true)}else{for(m=0;m<g.length;m++){c(">tfoot th:eq("+m+")",t.footer)[0].className=this.s.dt.aoColumns[g[m]].nTf.className}}this._fnEqualiseHeights("tfoot",this.dom.footer,t.footer)}var l=c(">tbody>tr:eq(0)",t.body);var f=c(">thead>tr:eq(0)",t.header);if(this.s.dt.nTFoot!==null){var w=c(">tfoot>tr:eq(0)",t.footer)}l.children().each(function(x){var y=c(this).width();f.children(":eq("+x+")").width(y);if(k.s.dt.nTFoot!==null){w.children(":eq("+x+")").width(y)}})},_fnGetTrNodes:function(e){var g=[];for(var f=0,d=e.childNodes.length;f<d;f++){if(e.childNodes[f].nodeName.toUpperCase()=="TR"){g.push(e.childNodes[f])}}return g},_fnEqualiseHeights:function(p,e,o){if(this.s.sHeightMatch=="none"){return}var m=this,j,f,d,h,t,s,l=e.getElementsByTagName(p)[0],n=o.getElementsByTagName(p)[0],g=c(">"+p+">tr:eq(0)",e).children(":first"),r=g.outerHeight()-g.height(),k=this._fnGetTrNodes(l),q=this._fnGetTrNodes(n);for(j=0,f=q.length;j<f;j++){if(this.s.sHeightMatch=="semiauto"&&typeof k[j]._DTTC_iHeight!="undefined"&&k[j]._DTTC_iHeight!==null){if(c.browser.msie){c(q[j]).children().height(k[j]._DTTC_iHeight-r)}continue}t=k[j].offsetHeight;s=q[j].offsetHeight;d=s>t?s:t;if(this.s.sHeightMatch=="semiauto"){k[j]._DTTC_iHeight=d}if(c.browser.msie){c(q[j]).children().height(d-r);c(k[j]).children().height(d-r)}else{q[j].style.height=d+"px";k[j].style.height=d+"px"}}}};FixedColumns.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sLeftWidth:"fixed",iLeftWidth:null,sRightWidth:"fixed",iRightWidth:null,sHeightMatch:"semiauto"};FixedColumns.prototype.CLASS="FixedColumns";FixedColumns.VERSION="2.0.1"})(jQuery,window,document);